{{define "title"}}social — wt.ai{{end}}
{{define "head"}}
<style>
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:2px}
.cell{min-height:120px;border-radius:2px;display:flex;flex-direction:column;justify-content:flex-end;padding:12px 14px;text-decoration:none;transition:opacity 0.12s;overflow:hidden}
.cell:hover{opacity:0.85}
.cell-slug{font-weight:600;color:rgba(255,255,255,0.9);font-size:13px;text-transform:lowercase;letter-spacing:-0.01em;line-height:1.2}
.cell-meta{font-size:10px;color:rgba(255,255,255,0.4);margin-top:3px}
.cell-top{font-size:11px;color:rgba(255,255,255,0.55);margin-bottom:8px;line-height:1.4;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}
.cell.empty .cell-slug{color:rgba(255,255,255,0.12);font-weight:400}
</style>
{{end}}
{{define "content"}}
<div class="grid">
{{range .Anchors}}
<a class="cell{{if eq .PostCount 0}} empty{{end}}" href="/w/{{.Slug}}" data-mass="{{printf "%.1f" .Mass}}" data-posts="{{.PostCount}}">
{{if .TopPost}}<div class="cell-top">{{.TopPost | stripMd}}</div>{{end}}
<div class="cell-slug">{{.Slug | slugDisplay}}</div>
<div class="cell-meta">{{if .TopLink}}{{.TopLink | clipDomain}}{{end}}{{if gt .PostCount 0}} · {{.PostCount}}{{end}}</div>
</a>
{{end}}
</div>
<script>
(function(){
  var cells = Array.from(document.querySelectorAll('.cell'));
  var maxMass = 0;
  cells.forEach(function(c){ var m = parseFloat(c.dataset.mass)||0; if(m>maxMass) maxMass=m; });

  cells.forEach(function(c){
    var m = parseFloat(c.dataset.mass)||0;
    if(m === 0){
      c.style.background = '#111318';
      return;
    }
    // Single hue ramp: dark slate → warm white via lightness + subtle saturation
    var t = maxMass > 0 ? m / maxMass : 0;
    var l = 14 + t * 18;  // 14% (barely visible) → 32% (bright)
    var s = 8 + t * 12;   // 8% (near gray) → 20% (hint of warmth)
    c.style.background = 'hsl(220,'+s+'%,'+l+'%)';
  });
})();
</script>
{{end}}
